-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

DROP DATABASE IF EXISTS atividade_pratica;

CREATE DATABASE atividade_pratica;

USE atividade_pratica;

-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

CREATE TABLE cidade(
	id_cidade INT NOT NULL KEY AUTO_INCREMENT,
    nome VARCHAR(100) NOT NULL,
	ativo ENUM('S','N') NOT NULL DEFAULT 'S'
);

CREATE TABLE endereco(
	id_endereco INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    rua VARCHAR(100) NOT NULL,
    numero VARCHAR(10) NOT NULL,
    bairro VARCHAR(50) NOT NULL,
    complemento VARCHAR(150),
    ativo ENUM('S','N') NOT NULL DEFAULT 'S',
    id_cidade INT NOT NULL,
    CONSTRAINT cidade_endereco FOREIGN KEY (id_cidade) REFERENCES cidade(id_cidade)
);

CREATE TABLE autor(
	id_autor INT NOT NULL PRiMARY KEY AUTO_INCREMENT,
    nome VARCHAR(150) NOT NULL,
    nacionalidade CHAR(2) NOT NULL,
    ativo ENUM('S','N') NOT NULL DEFAULT 'S'
);

CREATE TABLE categoria(
	id_categoria INT NOT NULL PRiMARY KEY AUTO_INCREMENT,
    classificacao VARCHAR(100) NOT NULL,
    ativo ENUM('S','N') NOT NULL DEFAULT 'S'
);

CREATE TABLE livro(
	id_livro INT NOT NULL PRiMARY KEY AUTO_INCREMENT,
    id CHAR(11) NOT NULL,
    titulo VARCHAR(150) NOT NULL,
    copias_totais INT NOT NULL,
    copias_disponiveis INT NOT NULL,
    data_lancamento DATE NOT NULL,
    data_obtencao DATE NOT NULL,
    id_autor INT NOT NULL,
    id_categoria INT NOT NULL,
    CONSTRAINT livro_autor FOREIGN KEY (id_autor) REFERENCES autor(id_autor),
    CONSTRAINT livro_categoria FOREIGN KEY (id_categoria) REFERENCES categoria(id_categoria)
);

CREATE TABLE funcionario(
	id_livro INT NOT NULL PRiMARY KEY AUTO_INCREMENT,
    nome VARCHAR(150) NOT NULL,
    data_nascimento DATE NOT NULL,
    cpf CHAR(11) NOT NULL,
    rg VARCHAR(15) NOT NULL,
    telefone CHAR(11) NOT NULL,
    data_contratacao DATE NOT NULL
);
